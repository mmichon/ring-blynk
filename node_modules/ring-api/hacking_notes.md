To intercept traffic:
=====================

setup
-----

* a raspberry pi on your local network with mitmproxy installed
* iOS device with ring app. Android will be fine too, but may need a little customisation

do this
-------

* ssh into rasperry pi `jimhigson@budapest ~> ssh pi@raspberrypi.local`

MITM Proxy needs to be run in transparent mode to get ring to trust it

* run: `mitmproxy -T --host --palette solarized_dark`
    (create an alias like: `alias mitmproxy "mitmproxy -T --host --palette solarized_dark"`

* get IP address of PI from computer:
    `ping raspberrypi.local`

Set up on iphone/ipad (OSX) like:
    https://jasdev.me/intercepting-ios-traffic
    [Clicky](mitm.it) from the ipad
    Might need to also do this: https://github.com/mitmproxy/mitmproxy/issues/2706 (my instructions) to trust cert

https://gist.github.com/joshenders/2b0dc14c89a8769f64a7    

this looks handy: https://www.adamengle.com/2016/12/08/raspberry-pi-3-mitmproxy/ - but wants to use own wifi net on pi
this looks better: https://docs.mitmproxy.org/stable/howto-transparent/ - can run on existing network by just setting Default Gateway
    * to check if already done, do:
```
cat /etc/sysctl.d/mitm.conf
net.ipv4.ip_forward=1
net.ipv4.conf.all.accept_redirects = 0
net.ipv4.conf.all.send_redirects = 0
```    


* Create reserved IP address for the ipad on the router
* set up wifi on the ipad manual...
```
    IP - address reserved on router for ipad - (currently reserved as 10.0.0.9)
    8.8.8.8 as DNS server (Google)
    subnet mask: IP Subnet Mask	255.255.240.0 (or whatever router says it is)
    Router - address of pi (currently reserved as 10.0.0.4)

For transparent mode, do ___NOOOOOOTTTT___ have proxy settings on the ipad turned on
```

mitmproxy: 
    z - clear screen
